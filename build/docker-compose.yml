{ "services": { "nsqlookupd": { "image": "nsqio/nsq", "command": "/nsqlookupd", "container_name": "nsqlookupd", "networks": [ "backend" ], "ports": [ "4160:4160", "4161:4161" ] }, "nsqd": { "image": "nsqio/nsq", "command": "/nsqd --lookupd-tcp-address=nsqlookupd:4160", "container_name": "nsqd", "networks": [ "backend" ], "ports": [] }, "postgres": { "image": "postgres:latest", "networks": [ "backend" ], "environment": { "POSTGRES_USER": "user", "POSTGRES_PASSWORD": "password", "POSTGRES_DB": "mydb" }, "ports": [ "5532:5432" ] }, "redis": { "image": "redis:latest", "networks": [ "backend" ], "ports": [ "6379:6379" ] }, "nsqadmin": { "image": "nsqio/nsq", "command": "/nsqadmin --lookupd-http-address=nsqlookupd:4161", "networks": [ "backend" ], "container_name": "nsqadmin", "depends_on": [ "nsqlookupd" ], "ports": [ "4171:4171" ] }, "mailcatcher": { "networks": [ "backend" ], "restart": "on-failure", "image": "dockage/mailcatcher:0.9.0", "ports": [ "1080:1080", "1025:1025" ] }, "backend_consume": { "env_file": "build/.env", "restart": "on-failure", "networks": [ "backend" ], "environment": { "DB_HOST": "postgres", "DB_NAME": "postgres", "DB_USER": "user", "DB_PASS": "password", "SMTP_HOST": "mailcatcher", "SMTP_PORT": "1025", "SMTP_PASS": "any", "SMTP_USER": "any", "QUEUE_BACKEND": "redis", "QUEUE_HOST": "redis" }, "ports": [], "command": "consume", "build": { "dockerfile": "backend/Dockerfile", "context": ".", "args": { "VERSION": "2025-02-24 00:42" } } }, "frontend": { "env_file": "build/.env", "restart": "on-failure", "networks": [ "backend" ], "environment": { "DB_HOST": "postgres", "DB_NAME": "postgres", "DB_USER": "user", "DB_PASS": "password", "SMTP_HOST": "mailcatcher", "SMTP_PORT": "1025", "SMTP_PASS": "", "SMTP_USER": "", "QUEUE_BACKEND": "redis", "QUEUE_HOST": "redis" }, "ports": [ "8119:8080" ], "build": { "dockerfile": "frontend/Dockerfile", "context": ".", "args": { "BACKEND_PREFIX": "http://localhost:8150", "VERSION": "2025-02-24 00:42" } } }, "backend_server": { "env_file": "build/.env", "restart": "on-failure", "networks": [ "backend" ], "environment": { "DB_HOST": "postgres", "DB_NAME": "postgres", "DB_USER": "user", "DB_PASS": "password", "SMTP_HOST": "mailcatcher", "SMTP_PORT": "1025", "SMTP_PASS": "", "SMTP_USER": "", "QUEUE_BACKEND": "redis", "QUEUE_HOST": "redis" }, "ports": [ "8150:8080" ], "command": "server", "build": { "dockerfile": "backend/Dockerfile", "context": ".", "args": { "VERSION": "2025-02-24 00:42" } } } }, "networks": { "backend": { "driver": "bridge" } } }
